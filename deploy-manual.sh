#!/usr/bin/env bash
set -euo pipefail

# CBDGold Manual Blueprint Creation Guide
# Since Render CLI isn't available, use this as a manual checklist

echo "üöÄ CBDGold Blueprint Deploy - Manual Steps"
echo "=========================================="
echo ""

echo "Current commit to deploy: $(git rev-parse HEAD)"
echo "Repository: queenofwands888/CBDGold"
echo "Branch: main"
echo ""

echo "üìã Step-by-step blueprint deployment:"
echo ""
echo "1. Open Render Dashboard (https://dashboard.render.com)"
echo "   ‚Üí Click 'New +' ‚Üí 'Blueprint Deploy'"
echo ""
echo "2. Connect Repository:"
echo "   ‚Üí Select 'queenofwands888/CBDGold'"
echo "   ‚Üí Branch: 'main'"
echo "   ‚Üí Blueprint file: render.yaml (at root)"
echo ""
echo "3. Review Services (from render.yaml):"
echo "   ‚úì cbdgold-backend (Node.js web service)"
echo "     - Root: projects/CBDGold/backend"
echo "     - Build: npm install"
echo "     - Start: npm run start"
echo ""
echo "   ‚úì cbdgold-frontend (Static site)"
echo "     - Root: projects/CBDGold"
echo "     - Build: npm install && npm run build"
echo "     - Publish: dist"
echo ""
echo "4. Environment Variables (set after deploy):"
echo "   Backend:"
echo "   - NODE_ENV=production"
echo "   - FRONTEND_URL=<frontend-url-from-render>"
echo "   - EMAIL_* vars (if needed)"
echo "   - ALGOD_* vars (if needed)"
echo ""
echo "   Frontend:"
echo "   - VITE_API_URL=<backend-url-from-render>"
echo "   - SKIP_CLIENT_GEN=1"
echo "   - VITE_ALGOD_* vars (for on-chain)"
echo ""
echo "5. Deploy & Test:"
echo "   ‚Üí Click 'Apply' to create services"
echo "   ‚Üí Monitor build logs (should show npm commands, not Docker)"
echo "   ‚Üí Test both URLs once green"
echo ""
echo "6. Clean up:"
echo "   ‚Üí Disable/delete old Docker services to avoid confusion"
echo "   ‚Üí Update custom domains if needed"
echo ""
echo "üîç If build fails, check logs for:"
echo "   ‚ùå 'Dockerfile' errors = still using old Docker service"
echo "   ‚úÖ 'npm install' logs = using correct blueprint"
echo ""
echo "üéØ Expected build output:"
echo "   Backend: npm install ‚Üí npm run start"
echo "   Frontend: npm install ‚Üí npm run build ‚Üí dist/"